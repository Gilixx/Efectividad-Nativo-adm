<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Estadísticas del Departamento de Efectividad Institucional.">
    <meta name="keywords" content="estadísticas, universidad, datos, efectividad institucional, matrícula">
    <title>Estadísticas</title>
    <link rel="stylesheet" href="public/styles/estadisticas-indicadores.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Logo -->
    <link rel="icon" href="https://cdn.um.click/logos-um/logo/">
</head>
<body>
    <!-- Header with Logo and Nav -->
    <header>
        <a href="https://www.um.edu.mx/">
            <div class="logo-container">
                <img src="https://cdn.um.click/logos-um/logo/" alt="Logo Universidad">
            </div> 
        </a>
        
        <!-- Sidebar/Nav -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Abrir menú de navegación">
                <i class="fas fa-bars"></i>
            </div>
            <nav class="nav-menu">
                <ul>
                   <li><a href="index.html"><i class="fas fa-home"></i> <span>Inicio</span></a></li>
                        <li><a href="acreditaciones.html"><i class="fas fa-award"></i> <span>Acreditaciones</span></a></li>
                        <li><a href="estadisticas-indicadores.html"><i class="fas fa-chart-bar"></i> <span>Estadísticas</span></a></li>
                        <li><a href="junta-gobierno.html"><i class="fas fa-university"></i> <span>Junta de Gobierno</span></a></li>
                        <li><a href="pide.html"><i class="fas fa-file-alt"></i> <span>PIDE</span></a></li>
                        <li><a href="equipo.html"><i class="fas fa-users"></i> <span>Equipo</span></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header Section -->
        <section class="page-header" id="top">
            <div class="title-container">
                <h1>Estadísticas</h1>
                <p>Visualiza los datos más relevantes de matrícula y demografía de nuestra institución</p>
            </div>
        </section>

        <!-- Sección: Las estadísticas en la UM -->
        <section class="content-section">
            <div class="box">
                <div class="section-text">
                    <h2>Las estadísticas en la UM</h2>
                    <p>Las estadísticas en la Universidad de Montemorelos nos permiten comprender mejor nuestra comunidad educativa y monitorear el progreso institucional. Estos datos son fundamentales para el mejoramiento continuo y el logro de nuestros objetivos.</p>
                    <p>A través de nuestro sistema de información, recopilamos y presentamos datos relevantes sobre matrícula estudiantil y características demográficas de nuestra comunidad universitaria.</p>
                </div>
                <div class="section-image">
                    <img src="public/assets/images/D345F6B3-C209-452D-8C8F-2F997C1CCA9C.JPG" alt="Estadísticas en la UM">
                </div>
            </div>
        </section>

        <!-- Sección: Visualizador de estadísticas -->
        <section class="content-section">
            <h2 class="section-title">Visualizador de estadísticas</h2>
            
            <div class="stats-tabs">
                <div class="tabs-nav">
                    <button class="tab-button active" data-tab="enrollment">Matrícula</button>
                    <button class="tab-button" data-tab="demographic">Demografía</button>
                    <button class="tab-button" data-tab="countries">Países</button>
                </div>
                
                <div class="tab-content">
                    <!-- Tab 1: Matrícula -->
                    <div class="tab-pane active" id="enrollment-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Total de estudiantes por facultad</h3>
                                <div class="chart-filters">
                                    <select id="enrollment-semester-filter">
                                        <option value="1">1er Semestre</option>
                                        <option value="2">2do Semestre</option>
                                    </select>
                                    <select id="enrollment-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="PREGRADO">Pregrado</option>
                                        <option value="POSGRADO">Posgrado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="enrollmentChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Total de estudiantes distribuidos por facultad</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab 2: Demografía -->
                    <div class="tab-pane" id="demographic-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Distribución demográfica de estudiantes</h3>
                                <div class="chart-filters">
                                    <select id="demographic-semester-filter">
                                        <option value="1">1er Semestre</option>
                                        <option value="2">2do Semestre</option>
                                    </select>
                                    <select id="demographic-type-filter">
                                        <option value="gender">Género</option>
                                        <option value="religion">Religión</option>
                                        <option value="residence">Residencia</option>
                                    </select>
                                    <select id="demographic-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="PREGRADO">Pregrado</option>
                                        <option value="POSGRADO">Posgrado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="demographicChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Distribución demográfica de la población estudiantil</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab 3: Países -->
                    <div class="tab-pane" id="countries-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Estudiantes por país de origen</h3>
                                <div class="chart-filters">
                                    <select id="countries-semester-filter">
                                        <option value="1">1er Semestre</option>
                                        <option value="2">2do Semestre</option>
                                    </select>
                                    <select id="countries-view-filter">
                                        <option value="top10">Top 10 países</option>
                                        <option value="top20">Top 20 países</option>
                                        <option value="all">Todos los países</option>
                                    </select>
                                    <select id="countries-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="PREGRADO">Pregrado</option>
                                        <option value="POSGRADO">Posgrado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="countriesChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Distribución de estudiantes por país de origen</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN SEPARADA: Panel de Control Institucional -->
        <section class="dashboard-section">
            <h2 class="section-title">Indicadores y Panel Estadístico</h2>
            <p class="section-subtitle">Los indicadores en la institucion son elementos concretos y especificos, cuantitativo o cuantitativo que permiten conocer el desempeño de un objetivo </p>
            <div class="dashboard-layout">
                <!-- Columna de Indicadores -->
                <div class="indicators-column">
                    <!-- Indicador 1 -->
                    <div class="stat-indicator">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total de Estudiantes</h3>
                                <div class="stat-value">3,245</div>
                            </div>
                        </div>
                        <div class="stat-detail">
                            <span class="stat-trend positive">
                                <i class="fas fa-arrow-up"></i> +4.2%
                            </span>
                            <span>vs año anterior</span>
                        </div>
                    </div>

                    <!-- Indicador 2 -->
                    <div class="stat-indicator">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-chalkboard-teacher"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Programas Acreditados</h3>
                                <div class="stat-value">28</div>
                            </div>
                        </div>
                        <div class="stat-detail">
                            <span class="stat-trend positive">
                                <i class="fas fa-arrow-up"></i> +3
                            </span>
                            <span>nuevas acreditaciones</span>
                        </div>
                    </div>

                    <!-- Indicador 3 -->
                    <div class="stat-indicator">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Tasa de Retención</h3>
                                <div class="stat-value">89.5%</div>
                            </div>
                        </div>
                        <div class="stat-detail">
                            <span class="stat-trend positive">
                                <i class="fas fa-arrow-up"></i> +2.3%
                            </span>
                            <span>mejora continua</span>
                        </div>
                    </div>

                    <!-- Indicador 4 -->
                    <div class="stat-indicator">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-globe-americas"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Países Representados</h3>
                                <div class="stat-value">42</div>
                            </div>
                        </div>
                        <div class="stat-detail">
                            <span class="stat-trend neutral">
                                <i class="fas fa-equals"></i> Estable
                            </span>
                            <span>diversidad global</span>
                        </div>
                    </div>

                    <!-- Indicador 5 -->
                    <div class="stat-indicator">
                        <div class="stat-header">
                            <div class="stat-icon">
                                <i class="fas fa-award"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Índice de Satisfacción</h3>
                                <div class="stat-value">4.6/5</div>
                            </div>
                        </div>
                        <div class="stat-detail">
                            <span class="stat-trend positive">
                                <i class="fas fa-arrow-up"></i> +0.3
                            </span>
                            <span>según encuestas</span>
                        </div>
                    </div>
                </div>

                <!-- Columna del Dashboard -->
                <div class="dashboard-column">
                    <div class="dashboard-preview" onclick="openDashboardModal()">
                        <div class="dashboard-content">
                            <span class="dashboard-badge">
                                <i class="fas fa-chart-line"></i> Dashboard Completo
                            </span>
                            <h3 class="dashboard-title">Analytics en Tiempo Real</h3>
                            <p class="dashboard-description">
                                Explora datos detallados, tendencias históricas y proyecciones futuras de nuestra institución con nuestro dashboard interactivo completo.
                            </p>
                            
                            <div class="dashboard-stats">
                                <div class="mini-stat">
                                    <span class="mini-stat-value">12</span>
                                    <div class="mini-stat-label">Facultades</div>
                                </div>
                                <div class="mini-stat">
                                    <span class="mini-stat-value">156</span>
                                    <div class="mini-stat-label">Programas</div>
                                </div>
                                <div class="mini-stat">
                                    <span class="mini-stat-value">98%</span>
                                    <div class="mini-stat-label">Empleabilidad</div>
                                </div>
                                <div class="mini-stat">
                                    <span class="mini-stat-value">250+</span>
                                    <div class="mini-stat-label">Docentes</div>
                                </div>
                            </div>

                            <a href="#" class="dashboard-cta" onclick="event.preventDefault();">
                                Ver Dashboard Completo
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN SEPARADA: Matrícula Histórica -->
        <section class="enrollment-slider-section">
            <div class="section-header-wrapper">
                <div class="section-icon-wrapper">
                    <i class="fas fa-chart-area"></i>
                </div>
                <div>
                    <h2 class="section-title">Evolución de la Matrícula por Años</h2>
                    <p class="section-subtitle">Análisis histórico del crecimiento estudiantil institucional</p>
                </div>
            </div>
            
            <div class="enrollment-slider-container">
                <div class="enrollment-slider-wrapper" id="enrollmentSliderWrapper">
                    <!-- Slide 2024 -->
                    <div class="enrollment-slide">
                        <div class="year-badge">2024</div>
                        <h3>Matrícula 2024</h3>
                        <div class="enrollment-chart-container">
                            <canvas id="enrollmentChart2024"></canvas>
                        </div>
                        <div class="trend-indicator">
                            <div class="trend-item">
                                <i class="fas fa-arrow-up trend-icon positive"></i>
                                <span class="trend-text">+4.1% vs 2023</span>
                            </div>
                            <div class="trend-sparkline" id="sparkline2024"></div>
                        </div>
                    </div>

                    <!-- Slide 2023 -->
                    <div class="enrollment-slide">
                        <div class="year-badge">2023</div>
                        <h3>Matrícula 2023</h3>
                        <div class="enrollment-chart-container">
                            <canvas id="enrollmentChart2023"></canvas>
                        </div>
                        <div class="trend-indicator">
                            <div class="trend-item">
                                <i class="fas fa-arrow-up trend-icon positive"></i>
                                <span class="trend-text">+3.6% vs 2022</span>
                            </div>
                            <div class="trend-sparkline" id="sparkline2023"></div>
                        </div>
                    </div>

                    <!-- Slide 2022 -->
                    <div class="enrollment-slide">
                        <div class="year-badge">2022</div>
                        <h3>Matrícula 2022</h3>
                        <div class="enrollment-chart-container">
                            <canvas id="enrollmentChart2022"></canvas>
                        </div>
                        <div class="trend-indicator">
                            <div class="trend-item">
                                <i class="fas fa-chart-line trend-icon base"></i>
                                <span class="trend-text">Año base</span>
                            </div>
                            <div class="trend-sparkline" id="sparkline2022"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controles del slider -->
            <div class="slider-controls">
                <button class="slider-btn" id="prevBtn" onclick="changeSlide(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <div class="slider-indicators">
                    <div class="slider-dot active" onclick="currentSlide(1)"></div>
                    <div class="slider-dot" onclick="currentSlide(2)"></div>
                    <div class="slider-dot" onclick="currentSlide(3)"></div>
                </div>
                
                <button class="slider-btn" id="nextBtn" onclick="changeSlide(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>

        <!-- Modal del Dashboard -->
        <div class="dashboard-modal" id="dashboardModal">
            <div class="dashboard-modal-content">
                <div class="dashboard-modal-header">
                    <h2>
                        <i class="fas fa-chart-bar"></i>
                        Dashboard Institucional Completo
                    </h2>
                    <button class="close-modal" onclick="closeDashboardModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="dashboard-modal-body">
                    <iframe 
                        width="100%" 
                        height="100%" 
                        src="https://lookerstudio.google.com/embed/reporting/bdfbeb0f-2e15-4bbe-951d-50593ed4b1d0/page/ZGi9D" 
                        frameborder="0" 
                        style="border:0" 
                        allowfullscreen 
                        sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox">
                    </iframe>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Departamento de Efectividad</h4>
                <p>Comprometidos con la excelencia y mejora continua de nuestra institución.</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces Rápidos</h4>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="src/pages/acreditaciones.html">Acreditaciones</a></li>
                    <li><a href="src/pages/mision-vision.html">Misión y Visión</a></li>
                    <li><a href="src/pages/estadisticas.html">Estadísticas</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <ul class="contact-info">
                    <li><i class="fas fa-phone"></i> (123) 456-7890</li>
                    <li><a href="mailto:efectividad@universidad.edu"><i class="fas fa-envelope"></i> efectividad@universidad.edu</a></li>
                    <li><i class="fas fa-map-marker-alt"></i> Campus Universitario</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Departamento de Efectividad. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="src/js/estadisticas.js"></script>
    <script src="src/js/Estadistica-años.js"></script>
    
    <script>
        // Script para el header responsive
        let lastScrollPosition = 0;
        const header = document.querySelector('header');
        const mainContent = document.querySelector('.main-content');
        const scrollThreshold = 50;

        window.addEventListener('scroll', () => {
            const currentScroll = window.scrollY;
            
            if (currentScroll > lastScrollPosition && currentScroll > scrollThreshold) {
                header.classList.add('hidden');
                mainContent.classList.add('header-hidden');
            } else if (currentScroll < lastScrollPosition) {
                header.classList.remove('hidden');
                mainContent.classList.remove('header-hidden');
            }
            
            lastScrollPosition = currentScroll;
        });

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('expanded');
        }

        // Funciones para el modal del dashboard
        function openDashboardModal() {
            document.getElementById('dashboardModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeDashboardModal() {
            document.getElementById('dashboardModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal con tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeDashboardModal();
            }
        });

        // Cerrar modal al hacer clic fuera del contenido
        document.getElementById('dashboardModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeDashboardModal();
            }
        });
    </script>
</body>
</html>