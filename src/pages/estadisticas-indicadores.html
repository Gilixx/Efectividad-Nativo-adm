Entendido. Te ayudaré a actualizar la sección de visualización de estadísticas con los datos de 2025. Comenzaré por la parte 1 del HTML con las actualizaciones necesarias.

```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Estadísticas e Indicadores del Departamento de Efectividad Institucional.">
    <meta name="keywords" content="estadísticas, indicadores, universidad, datos, efectividad institucional">
    <title>Estadísticas e Indicadores</title>
    <link rel="stylesheet" href="/public/styles/estadisticas-indicadores.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Logo -->
    <link rel="icon" href="https://cdn.um.click/logos-um/logo/">
</head>
<body>
    <!-- Header with Logo and Nav -->
    <header>
        <a href="https://www.um.edu.mx/">
            <div class="logo-container">
                <img src="https://cdn.um.click/logos-um/logo/" alt="Logo Universidad">
            </div> 
        </a>
        
        <!-- Sidebar/Nav -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Abrir menú de navegación">
                <i class="fas fa-bars"></i>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="/index.html"><i class="fas fa-home"></i> <span>Inicio</span></a></li>
                    <li><a href="/src/pages/acreditaciones.html"><i class="fas fa-award"></i> <span>Acreditaciones</span></a></li>
                    <li><a href="/src/pages/estadisticas.html" class="active"><i class="fas fa-chart-bar"></i> <span>Estadísticas</span></a></li>
                    <li><a href="/src/pages/junta-gobierno.html"><i class="fas fa-university"></i> <span>Junta de Gobierno</span></a></li>
                    <li><a href="/src/pages/pide.html"><i class="fas fa-file-alt"></i> <span>PIDE</span></a></li>
                    <li><a href="/src/pages/equipo.html"><i class="fas fa-users"></i> <span>Equipo</span></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header Section -->
        <section class="page-header" id="top">
            <div class="title-container">
                <h1>Estadísticas e Indicadores</h1>
                <p>Visualiza y analiza los datos más relevantes de nuestra institución</p>
            </div>
        </section>

        <!-- Sección: Las estadísticas en la UM -->
        <section class="content-section">
            <div class="box">
                <div class="section-text">
                    <h2>Las estadísticas en la UM</h2>
                    <p>Las estadísticas en la Universidad de Montemorelos nos permiten comprender mejor nuestra comunidad educativa, monitorear el progreso y tomar decisiones informadas. Estos datos son fundamentales para el mejoramiento continuo y el logro de nuestros objetivos institucionales.</p>
                    <p>A través de nuestro sistema de indicadores, recopilamos, analizamos y presentamos información relevante sobre diversos aspectos de la vida universitaria, desde la matrícula estudiantil hasta la efectividad de nuestros programas académicos.</p>
                </div>
                <div class="section-image">
                    <img src="/public/assets/images/D345F6B3-C209-452D-8C8F-2F997C1CCA9C.JPG" alt="Estadísticas en la UM">
                </div>
            </div>
        </section>

        <!-- Sección: Visualizador de estadísticas -->
        <section class="content-section">
            <h2 class="section-title">Visualizador de estadísticas</h2>
            
            <div class="stats-tabs">
                <div class="tabs-nav">
                    <button class="tab-button active" data-tab="enrollment">Matrícula</button>
                    <button class="tab-button" data-tab="demographic">Demografía</button>
                    <button class="tab-button" data-tab="countries">Países</button>
                    <button class="tab-button" data-tab="academic">Académico</button>
                </div>
                
                <div class="tab-content">
                    <!-- Tab 1: Matrícula -->
                    <div class="tab-pane active" id="enrollment-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                
                                <div class="chart-filters">
                                    <select id="enrollment-year-filter">
                                        <option value="2025" selected>2025-2026</option>
                                        <option value="2024">2024-2025</option>
                                        <option value="2023">2023-2024</option>
                                        <option value="2022">2022-2023</option>
                                    </select>
                                    <select id="enrollment-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="undergraduate">Pregrado</option>
                                        <option value="graduate">Posgrado</option>
                                    </select>
                                    <select id="enrollment-semester-filter">
                                        <option value="all">Todos los semestres</option>
                                        <option value="first">Primer semestre</option>
                                        <option value="second">Segundo semestre</option>
                                    </select>
                                    <select id="enrollment-mode-filter">
                                        <option value="all">Todas las modalidades</option>
                                        <option value="presential">Presencial</option>
                                        <option value="online">En línea</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="enrollmentChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Distribución de estudiantes de primer ingreso por programa académico</p>
                            </div>
                        </div>
                    </div>
                   
                                        <!-- Tab 2: Demografía -->
                                        <div class="tab-pane" id="demographic-tab">
                                            <div class="chart-container">
                                                <div class="chart-header">
                                                    <h3>Datos demográficos de estudiantes</h3>
                                                    <div class="chart-filters">
                                                        <select id="demographic-year-filter">
                                                            <option value="2025" selected>2025-2026</option>
                                                            <option value="2024">2024-2025</option>
                                                            <option value="2023">2023-2024</option>
                                                        </select>
                                                        <select id="demographic-semester-filter">
                                                            <option value="1">Primer Semestre</option>
                                                            <option value="2">Segundo Semestre</option>
                                                        </select>
                                                        <select id="demographic-type-filter">
                                                            <option value="gender">Género</option>
                                                            <option value="age">Edad</option>
                                                            <option value="state">Estado</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="chart-wrapper">
                                                    <canvas id="demographicChart"></canvas>
                                                </div>
                                                <div class="chart-legend">
                                                    <p>Distribución demográfica de la población estudiantil</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Tab 3: Países -->
                                        <div class="tab-pane" id="countries-tab">
                                            <div class="chart-container">
                                                <div class="chart-header">
                                                    <h3>Estudiantes por país de origen</h3>
                                                    <div class="chart-filters">
                                                        <select id="countries-year-filter">
                                                            <option value="2025" selected>2025-2026</option>
                                                            <option value="2024">2024-2025</option>
                                                            <option value="2023">2023-2024</option>
                                                        </select>
                                                        <select id="countries-semester-filter">
                                                            <option value="1">Primer Semestre</option>
                                                            <option value="2">Segundo Semestre</option>
                                                        </select>
                                                        <select id="countries-view-filter">
                                                            <option value="all">Todos los países</option>
                                                            <option value="top10">Top 10 países</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="chart-wrapper">
                                                    <canvas id="countriesChart"></canvas>
                                                </div>
                                                <div class="chart-legend">
                                                    <p>Distribución de estudiantes por país de origen</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Tab 4: Académico -->
                                        <div class="tab-pane" id="academic-tab">
                                            <div class="chart-container">
                                                <div class="chart-header">
                                                    <h3>Indicadores académicos</h3>
                                                    <div class="chart-filters">
                                                        <select id="academic-indicator-filter">
                                                            <option value="retention">Tasa de retención</option>
                                                            <option value="graduation">Tasa de graduación</option>
                                                            <option value="satisfaction">Satisfacción estudiantil</option>
                                                        </select>
                                                        <select id="academic-year-filter">
                                                            <option value="2025" selected>2025</option>
                                                            <option value="2024">2024</option>
                                                            <option value="2023">2023</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="chart-wrapper">
                                                    <canvas id="academicChart"></canvas>
                                                </div>
                                                <div class="chart-legend">
                                                    <p>Indicadores de desempeño académico por programa</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section class="content-section">
                                <iframe width="1100" height="600" src="https://lookerstudio.google.com/embed/reporting/bdfbeb0f-2e15-4bbe-951d-50593ed4b1d0/page/ZGi9D" frameborder="0" style="border:0" allowfullscreen sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"></iframe>
                            </section>
                    
                            <!-- Sección: Los indicadores en la UM -->
                            <section class="content-section">
                                <div class="box">
                                    <div class="section-text">
                                        <h2>Los indicadores en la UM</h2>
                                        <p>Los indicadores institucionales son métricas clave que nos permiten evaluar el desempeño y la efectividad de nuestros procesos educativos y administrativos. Estos indicadores están alineados con nuestra misión y visión, y nos ayudan a identificar áreas de oportunidad y fortalezas.</p>
                                        <p>Nuestro sistema de indicadores se basa en estándares nacionales e internacionales de calidad educativa, y se actualiza periódicamente para reflejar las tendencias actuales en educación superior.</p>
                                    </div>
                                    <div class="section-image">
                                        <img src="/public/assets/images/54091072743_b06502712c_o.jpg" alt="Indicadores en la UM">
                                    </div>
                                </div>
                            </section>
                    
                            <!-- Sección: Visualizador de indicadores -->
                            <section class="content-section">
                                <h2 class="section-title">Visualizador de indicadores</h2>
                                
                                <div class="indicators-dashboard">
                                    <div class="indicators-filters">
                                        <select id="indicator-year-filter">
                                            <option value="2025" selected>2025</option>
                                            <option value="2024">2024</option>
                                            <option value="2023">2023</option>
                                        </select>
                                        <select id="indicator-type-filter">
                                            <option value="all">Todos los indicadores</option>
                                            <option value="academic">Académicos</option>
                                            <option value="financial">Financieros</option>
                                            <option value="infrastructure">Infraestructura</option>
                                            <option value="research">Investigación</option>
                                        </select>
                                    </div>
                                    
                                    <div class="indicators-grid">
                                        <!-- Indicador 1 -->
                                        <div class="indicator-card">
                                            <div class="indicator-icon">
                                                <i class="fas fa-user-graduate"></i>
                                            </div>
                                            <div class="indicator-info">
                                                <h3>Tasa de retención</h3>
                                                <div class="indicator-chart">
                                                    <canvas id="retentionChart"></canvas>
                                                </div>
                                                <div class="indicator-value">
                                                    <span class="value">89.2%</span>
                                                    <span class="change positive">+1.7%</span>
                                                </div>
                                            </div>
                                        </div>
<!-- Indicador 2 -->
                    <div class="indicator-card">
                        <div class="indicator-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="indicator-info">
                            <h3>Tasa de graduación</h3>
                            <div class="indicator-chart">
                                <canvas id="graduationChart"></canvas>
                            </div>
                            <div class="indicator-value">
                                <span class="value">80.5%</span>
                                <span class="change positive">+2.3%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicador 3 -->
                    <div class="indicator-card">
                        <div class="indicator-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <div class="indicator-info">
                            <h3>Satisfacción estudiantil</h3>
                            <div class="indicator-chart">
                                <canvas id="satisfactionChart"></canvas>
                            </div>
                            <div class="indicator-value">
                                <span class="value">93.4%</span>
                                <span class="change positive">+1.3%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicador 4 -->
                    <div class="indicator-card">
                        <div class="indicator-icon">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="indicator-info">
                            <h3>Calificación docente</h3>
                            <div class="indicator-chart">
                                <canvas id="teacherChart"></canvas>
                            </div>
                            <div class="indicator-value">
                                <span class="value">4.8/5.0</span>
                                <span class="change positive">+0.1</span>
                            </div>
                        </div>
                    </div>

                    <!-- Indicador 5 -->
                    <div class="indicator-card">
                        <div class="indicator-icon">
                            <i class="fas fa-microscope"></i>
                        </div>
                        <div class="indicator-info">
                            <h3>Producción investigativa</h3>
                            <div class="indicator-chart">
                                <canvas id="researchChart"></canvas>
                            </div>
                            <div class="indicator-value">
                                <span class="value">57</span>
                                <span class="change positive">+12</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicador 6 -->
                    <div class="indicator-card">
                        <div class="indicator-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="indicator-info">
                            <h3>Ocupación de aulas</h3>
                            <div class="indicator-chart">
                                <canvas id="classroomChart"></canvas>
                            </div>
                            <div class="indicator-value">
                                <span class="value">85.7%</span>
                                <span class="change positive">+2.3%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicador 7 (Nuevo para 2025) -->
                    <div class="indicator-card">
                        <div class="indicator-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="indicator-info">
                            <h3>Internacionalización</h3>
                            <div class="indicator-chart">
                                <canvas id="internationalChart"></canvas>
                            </div>
                            <div class="indicator-value">
                                <span class="value">18.5%</span>
                                <span class="change positive">+3.2%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Departamento de Efectividad</h4>
                <p>Comprometidos con la excelencia y mejora continua de nuestra institución.</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces Rápidos</h4>
                <ul>
                    <li><a href="/index.html">Inicio</a></li>
                    <li><a href="/src/pages/acreditaciones.html">Acreditaciones</a></li>
                    <li><a href="/src/pages/mision-vision.html">Misión y Visión</a></li>
                    <li><a href="/src/pages/estadisticas.html">Estadísticas</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <ul class="contact-info">
                    <li><i class="fas fa-phone"></i> (123) 456-7890</li>
                    <li><i class="fas fa-envelope"></i> efectividad@universidad.edu</li>
                    <li><i class="fas fa-map-marker-alt"></i> Campus Universitario</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Departamento de Efectividad. Todos los derechos reservados.</p>
        </div>
    </footer>

  <script>
// Colores consistentes para las gráficas
const chartColors = [
    'rgba(84, 68, 239, 0.8)',   // primary - azul principal
    'rgba(133, 142, 255, 0.8)',  // secondary - azul secundario
    'rgba(242, 205, 0, 0.8)',    // accent - amarillo
    'rgba(66, 0, 124, 0.8)',     // dark-accent - morado oscuro
    'rgba(175, 149, 113, 0.8)',  // neutral-accent - marrón
    'rgba(210, 227, 248, 0.8)',  // light-accent - azul claro
    'rgba(255, 99, 132, 0.8)',   // rojo
    'rgba(54, 162, 235, 0.8)',   // azul
    'rgba(255, 206, 86, 0.8)',   // amarillo
    'rgba(75, 192, 192, 0.8)',   // turquesa
    'rgba(153, 102, 255, 0.8)',  // púrpura
    'rgba(255, 159, 64, 0.8)'    // naranja
];

const chartBorderColors = [
    'rgba(84, 68, 239, 1)',     // primary
    'rgba(133, 142, 255, 1)',    // secondary
    'rgba(242, 205, 0, 1)',      // accent
    'rgba(66, 0, 124, 1)',       // dark-accent
    'rgba(175, 149, 113, 1)',    // neutral-accent
    'rgba(210, 227, 248, 1)',    // light-accent
    'rgba(255, 99, 132, 1)',     // rojo
    'rgba(54, 162, 235, 1)',     // azul
    'rgba(255, 206, 86, 1)',     // amarillo
    'rgba(75, 192, 192, 1)',     // turquesa
    'rgba(153, 102, 255, 1)',    // púrpura
    'rgba(255, 159, 64, 1)'      // naranja
];

// Etiquetas para los meses, usado en varias gráficas
const monthLabels = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];

// Etiquetas para programas académicos
const academicPrograms = [
    'Administración', 
    'Enfermería', 
    'Medicina', 
    'Psicología', 
    'Ingeniería', 
    'Educación', 
    'Teología', 
    'Contaduría', 
    'Comunicación', 
    'Nutrición',
    'Ciencias de Datos'
];

// Datos de matrícula actualizados para 2025
// Estos datos representan estudiantes de primer ingreso por programa académico
const enrollmentData = {
    // Todos los niveles
    all: {
        // Todos los semestres
        all: {
            all: [132, 108, 95, 125, 92, 75, 65, 82, 70, 78, 60], // Todas las modalidades
            presential: [110, 90, 82, 102, 78, 62, 52, 70, 58, 65, 40], // Presencial
            online: [22, 18, 13, 23, 14, 13, 13, 12, 12, 13, 20] // En línea
        },
        // Primer semestre
        first: {
            all: [85, 65, 60, 80, 55, 45, 38, 48, 42, 48, 38], // Todas las modalidades
            presential: [70, 52, 52, 65, 48, 38, 30, 40, 35, 40, 25], // Presencial
            online: [15, 13, 8, 15, 7, 7, 8, 8, 7, 8, 13] // En línea
        },
        // Segundo semestre
        second: {
            all: [47, 43, 35, 45, 37, 30, 27, 34, 28, 30, 22], // Todas las modalidades
            presential: [40, 38, 30, 37, 30, 24, 22, 30, 23, 25, 15], // Presencial
            online: [7, 5, 5, 8, 7, 6, 5, 4, 5, 5, 7] // En línea
        }
    },
    // Pregrado
    undergraduate: {
        // Todos los semestres
        all: {
            all: [120, 95, 85, 115, 80, 65, 55, 75, 60, 65, 55], // Todas las modalidades
            presential: [105, 85, 75, 95, 70, 55, 45, 65, 52, 58, 38], // Presencial
            online: [15, 10, 10, 20, 10, 10, 10, 10, 8, 7, 17] // En línea
        },
        // Primer semestre
        first: {
            all: [75, 58, 52, 70, 48, 38, 32, 42, 35, 40, 35], // Todas las modalidades
            presential: [65, 50, 45, 58, 42, 32, 27, 35, 30, 35, 25], // Presencial
            online: [10, 8, 7, 12, 6, 6, 5, 7, 5, 5, 10] // En línea
        },
        // Segundo semestre
        second: {
            all: [45, 37, 33, 45, 32, 27, 23, 33, 25, 25, 20], // Todas las modalidades
            presential: [40, 35, 30, 37, 28, 23, 18, 30, 22, 23, 13], // Presencial
            online: [5, 2, 3, 8, 4, 4, 5, 3, 3, 2, 7] // En línea
        }
    },
    // Posgrado
    graduate: {
        // Todos los semestres
        all: {
            all: [12, 13, 10, 10, 12, 10, 10, 7, 10, 13, 5], // Todas las modalidades
            presential: [5, 5, 7, 7, 8, 7, 7, 5, 6, 7, 2], // Presencial
            online: [7, 8, 3, 3, 4, 3, 3, 2, 4, 6, 3] // En línea
        },
        // Primer semestre
        first: {
            all: [10, 7, 8, 10, 7, 7, 6, 6, 7, 8, 3], // Todas las modalidades
            presential: [5, 2, 7, 7, 6, 6, 3, 5, 5, 5, 0], // Presencial
            online: [5, 5, 1, 3, 1, 1, 3, 1, 2, 3, 3] // En línea
        },
        // Segundo semestre
        second: {
            all: [2, 6, 2, 0, 5, 3, 4, 1, 3, 5, 2], // Todas las modalidades
            presential: [0, 3, 0, 0, 2, 1, 4, 0, 1, 2, 2], // Presencial
            online: [2, 3, 2, 0, 3, 2, 0, 1, 2, 3, 0] // En línea
        }
    }
};
  </script>

  <script>
    // Datos demográficos por semestre actualizados para 2025
const demographicData = {
    '1': { // Primer semestre
        gender: {
            labels: ['Masculino', 'Femenino',],
            data: [807,617,]
        },
        age: {
            labels: ['17-20', '21-25', '26-30', '31-40', '41+'],
            data: [37, 38, 15, 7, 3]
        },
        state: {
            labels: ['Nuevo León', 'CDMX', 'Jalisco', 'Chiapas', 'Otros'],
            data: [38, 17, 12, 10, 23]
        }
    },
    '2': { // Segundo semestre
        gender: {
            labels: ['Masculino', 'Femenino'],
            data: [327,217,]
        },
        age: {
            labels: ['17-20', '21-25', '26-30', '31-40', '41+'],
            data: [35, 40, 16, 7, 2]
        },
        state: {
            labels: ['Nuevo León', 'CDMX', 'Jalisco', 'Chiapas', 'Otros'],
            data: [37, 18, 13, 11, 21]
        }
    }
};

// Datos de países de origen por semestre actualizados para 2025
const countriesData = {
    '1': { // Primer semestre
        all: {
            labels: ['México', 'Colombia', 'Perú', 'Argentina', 'Estados Unidos', 'Brasil', 'Chile', 'Venezuela', 'España', 'Ecuador', 'Otros'],
            data: [60, 13, 9, 6, 4, 3, 2, 2, 1, 1, 4]
        },
        top10: {
            labels: ['México', 'Colombia', 'Perú', 'Argentina', 'Estados Unidos', 'Brasil', 'Chile', 'Venezuela', 'España', 'Ecuador'],
            data: [60, 13, 9, 6, 4, 3, 2, 2, 1, 1]
        }
    },
    '2': { // Segundo semestre
        all: {
            labels: ['México', 'Colombia', 'Perú', 'Argentina', 'Brasil', 'Estados Unidos', 'Chile', 'Venezuela', 'Ecuador', 'España', 'Otros'],
            data: [58, 14, 10, 6, 4, 3, 2, 2, 1, 1, 4]
        },
        top10: {
            labels: ['México', 'Colombia', 'Perú', 'Argentina', 'Brasil', 'Estados Unidos', 'Chile', 'Venezuela', 'Ecuador', 'España'],
            data: [58, 14, 10, 6, 4, 3, 2, 2, 1, 1]
        }
    }
};

// Datos académicos por año e indicador actualizados hasta 2025
const academicData = {
    '2023': {
        retention: [92, 88, 95, 90, 87, 91, 89, 86, 84, 92],
        graduation: [82, 76, 90, 85, 78, 80, 79, 75, 74, 81],
        satisfaction: [91, 93, 90, 92, 88, 89, 87, 88, 90, 94]
    },
    '2024': {
        retention: [93, 89, 96, 91, 88, 92, 90, 87, 85, 93, 89],
        graduation: [83, 77, 91, 86, 79, 81, 80, 76, 75, 82, 75],
        satisfaction: [92, 94, 91, 93, 89, 90, 88, 89, 91, 95, 92]
    },
    '2025': {
        retention: [94, 90, 97, 92, 89, 93, 91, 88, 86, 94, 91],
        graduation: [84, 78, 92, 87, 80, 82, 81, 77, 76, 83, 77],
        satisfaction: [93, 95, 92, 94, 90, 91, 89, 90, 92, 96, 93]
    }
};

// Indicadores académicos por año (para mostrar tendencias) actualizados hasta 2025
const academicIndicators = {
    '2023': {
        retention: 87.5,
        graduation: 78.2,
        satisfaction: 92.1
    },
    '2024': {
        retention: 88.4,
        graduation: 79.4,
        satisfaction: 93.2
    },
    '2025': {
        retention: 89.2,
        graduation: 80.5,
        satisfaction: 93.4
    }
};

// Configuración por defecto para las gráficas
const defaultChartOptions = {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
        legend: {
            position: 'top',
            labels: {
                padding: 10,
                boxWidth: 15,
                font: {
                    size: 12
                }
            }
        },
        title: {
            display: true,
            font: {
                size: 16,
                weight: 'bold'
            },
            padding: {
                top: 10,
                bottom: 20
            }
        }
    },
    scales: {
        x: {
            grid: {
                color: 'rgba(0, 0, 0, 0.05)'
            }
        },
        y: {
            grid: {
                color: 'rgba(0, 0, 0, 0.05)'
            },
            beginAtZero: true
        }
    },
    animation: {
        duration: 1000,
        easing: 'easeOutQuart'
    }
};
  </script>

  <script>
    // PARTE 3: FUNCIONES PARA INICIALIZAR Y ACTUALIZAR GRÁFICAS

/**
 * Inicializa la gráfica de matrícula.
 * @returns {Chart} Instancia de la gráfica de matrícula
 */
function initEnrollmentChart() {
    const enrollmentCtx = document.getElementById('enrollmentChart').getContext('2d');
    if (!enrollmentCtx) return null;
    
    const options = {
        ...defaultChartOptions,
        plugins: {
            ...defaultChartOptions.plugins,
            title: {
                ...defaultChartOptions.plugins.title,
                text: 'Distribución por Programa Académico (2025)'
            }
        }
    };
    
    const enrollmentChart = new Chart(enrollmentCtx, {
        type: 'bar',
        data: {
            labels: academicPrograms,
            datasets: [{
                label: 'Alumnos de primer ingreso 2025',
                data: enrollmentData.all.all.all,
                backgroundColor: chartColors,
                borderColor: chartBorderColors,
                borderWidth: 1
            }]
        },
        options: options
    });
    
    return enrollmentChart;
}

/**
 * Actualiza la gráfica de matrícula según los filtros seleccionados.
 * @param {Chart} chart - Instancia de la gráfica de matrícula
 * @param {string} level - Nivel académico ('all', 'undergraduate', 'graduate')
 * @param {string} semester - Semestre ('all', 'first', 'second')
 * @param {string} mode - Modalidad ('all', 'presential', 'online')
 */
function updateEnrollmentChart(chart, level, semester, mode) {
    if (!chart) return;
    
    // Obtener los datos según los filtros seleccionados
    const newData = enrollmentData[level][semester][mode];
    
    // Actualizar año según el filtro seleccionado
    const yearFilter = document.getElementById('enrollment-year-filter');
    const selectedYear = yearFilter ? yearFilter.value : '2025';
    
    // Actualizar título según filtros
    let titlePrefix = '';
    if (level === 'undergraduate') {
        titlePrefix += 'Pregrado: ';
    } else if (level === 'graduate') {
        titlePrefix += 'Posgrado: ';
    }
    
    if (semester === 'first') {
        titlePrefix += 'Primer Semestre - ';
    } else if (semester === 'second') {
        titlePrefix += 'Segundo Semestre - ';
    }
    
    if (mode === 'presential') {
        titlePrefix += 'Modalidad Presencial';
    } else if (mode === 'online') {
        titlePrefix += 'Modalidad En Línea';
    } else if (titlePrefix) {
        titlePrefix += 'Todas las Modalidades';
    }
    
    const chartTitle = titlePrefix 
        ? `${titlePrefix} (${selectedYear})`
        : `Distribución por Programa Académico (${selectedYear})`;
    
    // Actualizar datos y título del gráfico
    chart.data.datasets[0].data = newData;
    chart.data.datasets[0].label = `Alumnos de primer ingreso ${selectedYear}`;
    chart.options.plugins.title.text = chartTitle;
    chart.update();
}

/**
 * Inicializa la gráfica demográfica.
 * @returns {Chart} Instancia de la gráfica demográfica
 */
function initDemographicChart() {
    const demographicCtx = document.getElementById('demographicChart').getContext('2d');
    if (!demographicCtx) return null;
    
    const options = {
        ...defaultChartOptions,
        plugins: {
            ...defaultChartOptions.plugins,
            title: {
                ...defaultChartOptions.plugins.title,
                text: 'Distribución por Género (Primer Semestre 2025)'
            }
        }
    };
    
    const demographicChart = new Chart(demographicCtx, {
        type: 'pie',
        data: {
            labels: demographicData['1'].gender.labels,
            datasets: [{
                label: 'Distribución por género',
                data: demographicData['1'].gender.data,
                backgroundColor: [chartColors[0], chartColors[2], chartColors[4]],
                borderColor: [chartBorderColors[0], chartBorderColors[2], chartBorderColors[4]],
                borderWidth: 1
            }]
        },
        options: options
    });
    
    return demographicChart;
}

/**
 * Actualiza la gráfica demográfica según los filtros seleccionados.
 * @param {Chart} chart - Instancia de la gráfica demográfica
 * @param {string} semester - Semestre ('1', '2')
 * @param {string} type - Tipo de datos demográficos ('gender', 'age', 'state')
 */
function updateDemographicChart(chart, semester, type) {
    if (!chart || !demographicData[semester] || !demographicData[semester][type]) return;
    
    // Obtener el año seleccionado
    const yearFilter = document.getElementById('demographic-year-filter');
    const selectedYear = yearFilter ? yearFilter.value : '2025';
    
    let chartType, title;
    
    // Determinar el tipo de gráfica y título según el tipo de datos
    if (type === 'gender') {
        chartType = 'pie';
        title = `Distribución por Género (${semester === '1' ? 'Primer' : 'Segundo'} Semestre ${selectedYear})`;
    } else if (type === 'age') {
        chartType = 'doughnut';
        title = `Distribución por Edad (${semester === '1' ? 'Primer' : 'Segundo'} Semestre ${selectedYear})`;
    } else if (type === 'state') {
        chartType = 'bar';
        title = `Distribución por Estado (${semester === '1' ? 'Primer' : 'Segundo'} Semestre ${selectedYear})`;
    }
    
    // Cambiar tipo de gráfica si es necesario
    chart.config.type = chartType;
    
    // Actualizar datos
    chart.data.labels = demographicData[semester][type].labels;
    chart.data.datasets[0].data = demographicData[semester][type].data;
    chart.data.datasets[0].label = `Distribución por ${type === 'gender' ? 'género' : type === 'age' ? 'edad' : 'estado'}`;
    
    // Ajustes según el tipo
    if (type === 'gender') {
        chart.data.datasets[0].backgroundColor = [chartColors[0], chartColors[2], chartColors[4]];
        chart.data.datasets[0].borderColor = [chartBorderColors[0], chartBorderColors[2], chartBorderColors[4]];
    } else if (type === 'age') {
        chart.data.datasets[0].backgroundColor = chartColors.slice(0, 5);
        chart.data.datasets[0].borderColor = chartBorderColors.slice(0, 5);
    } else if (type === 'state') {
        chart.data.datasets[0].backgroundColor = chartColors.slice(0, 5);
        chart.data.datasets[0].borderColor = chartBorderColors.slice(0, 5);
    }
    
    // Actualizar título
    chart.options.plugins.title.text = title;
    
    // Actualizar la leyenda según el tipo
    if (type === 'gender' || type === 'age') {
        chart.options.plugins.legend.position = 'right';
    } else {
        chart.options.plugins.legend.position = 'top';
    }
    
    chart.update();
}
  </script>

  <script>
    /**
 * Inicializa la gráfica de países.
 * @returns {Chart} Instancia de la gráfica de países
 */
function initCountriesChart() {
    const countriesCtx = document.getElementById('countriesChart').getContext('2d');
    if (!countriesCtx) return null;
    
    // Obtener el año seleccionado
    const yearFilter = document.getElementById('countries-year-filter');
    const selectedYear = yearFilter ? yearFilter.value : '2025';
    
    const options = {
        ...defaultChartOptions,
        plugins: {
            ...defaultChartOptions.plugins,
            title: {
                ...defaultChartOptions.plugins.title,
                text: `Distribución por País de Origen (Primer Semestre ${selectedYear})`
            },
            legend: {
                ...defaultChartOptions.plugins.legend,
                position: 'right'
            }
        }
    };
    
    const countriesChart = new Chart(countriesCtx, {
        type: 'doughnut',
        data: {
            labels: countriesData['1'].all.labels,
            datasets: [{
                label: 'Estudiantes por país',
                data: countriesData['1'].all.data,
                backgroundColor: chartColors,
                borderColor: chartBorderColors,
                borderWidth: 1
            }]
        },
        options: options
    });
    
    return countriesChart;
}

/**
 * Actualiza la gráfica de países según los filtros seleccionados.
 * @param {Chart} chart - Instancia de la gráfica de países
 * @param {string} semester - Semestre ('1', '2')
 * @param {string} view - Vista ('all', 'top10')
 */
function updateCountriesChart(chart, semester, view) {
    if (!chart || !countriesData[semester] || !countriesData[semester][view]) return;
    
    // Obtener el año seleccionado
    const yearFilter = document.getElementById('countries-year-filter');
    const selectedYear = yearFilter ? yearFilter.value : '2025';
    
    // Actualizar datos
    chart.data.labels = countriesData[semester][view].labels;
    chart.data.datasets[0].data = countriesData[semester][view].data;
    
    // Actualizar título
    chart.options.plugins.title.text = `Distribución por País de Origen (${semester === '1' ? 'Primer' : 'Segundo'} Semestre ${selectedYear})`;
    
    chart.update();
}

/**
 * Inicializa la gráfica académica.
 * @returns {Chart} Instancia de la gráfica académica
 */
function initAcademicChart() {
    const academicCtx = document.getElementById('academicChart').getContext('2d');
    if (!academicCtx) return null;
    
    const options = {
        ...defaultChartOptions,
        plugins: {
            ...defaultChartOptions.plugins,
            title: {
                ...defaultChartOptions.plugins.title,
                text: 'Tasa de Retención por Programa (2025)'
            }
        },
        scales: {
            ...defaultChartOptions.scales,
            y: {
                ...defaultChartOptions.scales.y,
                min: 70,
                max: 100
            }
        }
    };
    
    const academicChart = new Chart(academicCtx, {
        type: 'line',
        data: {
            labels: academicPrograms,
            datasets: [{
                label: 'Tasa de retención (%)',
                data: academicData['2025'].retention,
                backgroundColor: 'rgba(84, 68, 239, 0.2)',
                borderColor: 'rgba(84, 68, 239, 1)',
                borderWidth: 2,
                tension: 0.4,
                fill: true
            }]
        },
        options: options
    });
    
    return academicChart;
}

/**
 * Actualiza la gráfica académica según los filtros seleccionados.
 * @param {Chart} chart - Instancia de la gráfica académica
 * @param {string} indicator - Indicador ('retention', 'graduation', 'satisfaction')
 * @param {string} year - Año ('2023', '2024', '2025')
 */
function updateAcademicChart(chart, indicator, year) {
    if (!chart || !academicData[year] || !academicData[year][indicator]) return;
    
    let label, title, min = 70, max = 100;
    
    // Configurar label y título según el indicador
    if (indicator === 'retention') {
        label = 'Tasa de retención (%)';
        title = `Tasa de Retención por Programa (${year})`;
    } else if (indicator === 'graduation') {
        label = 'Tasa de graduación (%)';
        title = `Tasa de Graduación por Programa (${year})`;
    } else { // satisfaction
        label = 'Satisfacción estudiantil (%)';
        title = `Satisfacción Estudiantil por Programa (${year})`;
    }
    
    // Actualizar datos
    chart.data.datasets[0].data = academicData[year][indicator];
    chart.data.datasets[0].label = label;
    
    // Actualizar título
    chart.options.plugins.title.text = title;
    
    // Actualizar escala Y
    chart.options.scales.y.min = min;
    chart.options.scales.y.max = max;
    
    chart.update();
}
  </script>

  <script>
    /**
 * Crea una gráfica de línea simple para los indicadores.
 * @param {string} canvasId - ID del elemento canvas
 * @param {Array} data - Datos para la gráfica
 * @param {string} color - Color RGB (formato: "R, G, B")
 * @returns {Chart|null} Instancia de la gráfica o null si no se puede crear
 */
function createIndicatorChart(canvasId, data, color) {
    const ctx = document.getElementById(canvasId);
    if (!ctx) return null;
    
    // Destruir gráfica existente si hay una
    if (ctx.chart) {
        ctx.chart.destroy();
    }
    
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: monthLabels,
            datasets: [{
                data: data,
                backgroundColor: `rgba(${color}, 0.2)`,
                borderColor: `rgba(${color}, 1)`,
                borderWidth: 2,
                tension: 0.4,
                fill: true,
                pointRadius: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 2.5,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    enabled: true,
                    displayColors: false,
                    callbacks: {
                        title: function() {
                            return '';
                        },
                        label: function(context) {
                            return context.parsed.y;
                        }
                    }
                }
            },
            scales: {
                x: {
                    display: false,
                    grid: {
                        display: false
                    }
                },
                y: {
                    display: false,
                    grid: {
                        display: false
                    },
                    min: Math.min(...data) * 0.95,
                    max: Math.max(...data) * 1.05
                }
            },
            elements: {
                line: {
                    tension: 0.4
                }
            },
            layout: {
                padding: {
                    left: 0,
                    right: 0,
                    top: 5,
                    bottom: 5
                }
            }
        }
    });
    
    // Guardar referencia de la gráfica en el canvas
    ctx.chart = chart;
    
    return chart;
}

/**
 * Inicializa todas las gráficas de indicadores.
 * @param {string} year - Año para los indicadores ('2023', '2024', '2025')
 */
function initIndicatorCharts(year) {
    // Datos simulados de tendencia mensual para cada indicador
    const indicators = {
        retention: {
            2023: {
                data: [86.4, 86.5, 86.7, 86.9, 87, 87.1, 87.2, 87.3, 87.4, 87.4, 87.5, 87.5],
                color: '84, 68, 239'
            },
            2024: {
                data: [87.5, 87.6, 87.8, 87.9, 88.0, 88.1, 88.2, 88.3, 88.3, 88.4, 88.4, 88.4],
                color: '84, 68, 239'
            },
            2025: {
                data: [88.4, 88.5, 88.6, 88.7, 88.8, 88.9, 89.0, 89.0, 89.1, 89.1, 89.2, 89.2],
                color: '84, 68, 239'
            }
        },
        graduation: {
            2023: {
                data: [77.1, 77.2, 77.4, 77.5, 77.7, 77.8, 77.9, 78.0, 78.1, 78.1, 78.2, 78.2],
                color: '133, 142, 255'
            },
            2024: {
                data: [78.2, 78.4, 78.6, 78.8, 79.0, 79.1, 79.2, 79.3, 79.3, 79.4, 79.4, 79.4],
                color: '133, 142, 255'
            },
            2025: {
                data: [79.4, 79.6, 79.8, 79.9, 80.1, 80.2, 80.3, 80.4, 80.4, 80.5, 80.5, 80.5],
                color: '133, 142, 255'
            }
        },
        satisfaction: {
            2023: {
                data: [90.8, 91.0, 91.2, 91.3, 91.5, 91.6, 91.7, 91.8, 91.9, 92.0, 92.1, 92.1],
                color: '242, 205, 0'
            },
            2024: {
                data: [92.1, 92.3, 92.5, 92.6, 92.8, 92.9, 93.0, 93.1, 93.1, 93.2, 93.2, 93.2],
                color: '242, 205, 0'
            },
            2025: {
                data: [93.2, 93.2, 93.3, 93.3, 93.3, 93.3, 93.4, 93.4, 93.4, 93.4, 93.4, 93.4],
                color: '242, 205, 0'
            }
        },
        research: {
            2023: {
                data: [38, 39, 40, 41, 42, 42, 43, 43, 44, 44, 45, 45],
                color: '175, 149, 113'
            },
            2024: {
                data: [45, 46, 47, 48, 49, 50, 51, 51, 52, 52, 53, 53],
                color: '175, 149, 113'
            },
            2025: {
                data: [53, 54, 55, 55, 56, 56, 56, 57, 57, 57, 57, 57],
                color: '175, 149, 113'
            }
        },
        classroom: {
            2023: {
                data: [84.5, 84.3, 84.1, 84.0, 83.8, 83.7, 83.6, 83.5, 83.5, 83.4, 83.4, 83.4],
                color: '210, 227, 248'
            },
            2024: {
                data: [83.4, 83.6, 83.8, 84.0, 84.2, 84.4, 84.6, 84.8, 85.0, 85.2, 85.4, 85.5],
                color: '210, 227, 248'
            },
            2025: {
                data: [85.5, 85.6, 85.6, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7],
                color: '210, 227, 248'
            }
        },
        teacher: {
            2023: {
                data: [4.6, 4.6, 4.6, 4.6, 4.6, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7],
                color: '66, 0, 124'
            },
            2024: {
                data: [4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8],
                color: '66, 0, 124'
            },
            2025: {
                data: [4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8],
                color: '66, 0, 124'
            }
        },
        international: {
            2023: {
                data: [12.5, 12.7, 12.9, 13.1, 13.3, 13.5, 13.7, 13.9, 14.1, 14.3, 14.5, 14.8],
                color: '255, 99, 132'
            },
            2024: {
                data: [14.8, 15.0, 15.2, 15.4, 15.6, 15.8, 16.0, 16.2, 16.4, 16.6, 16.8, 17.0],
                color: '255, 99, 132'
            },
            2025: {
                data: [17.0, 17.2, 17.4, 17.6, 17.8, 18.0, 18.1, 18.2, 18.3, 18.4, 18.5, 18.5],
                color: '255, 99, 132'
            }
        }
    };
    
    // Crear gráficas para cada indicador
    for (const indicator in indicators) {
        if (indicators.hasOwnProperty(indicator) && indicators[indicator][year]) {
            createIndicatorChart(
                `${indicator}Chart`,
                indicators[indicator][year].data,
                indicators[indicator][year].color
            );
        }
    }
}
  </script>

  <script>
    /**
 * Actualiza los valores y gráficas de todos los indicadores según el año seleccionado.
 * @param {string} year - Año seleccionado ('2023', '2024', '2025')
 * @param {string} type - Tipo de indicador ('all', 'academic', 'research', 'infrastructure', 'financial')
 */
function updateIndicators(year, type) {
    // Mapeo de indicadores con sus valores según el año
    const indicatorValues = {
        '2023': {
            'retention': { value: '87.5%', change: '+1.1%', data: [86.4, 86.5, 86.7, 86.9, 87.0, 87.1, 87.2, 87.3, 87.4, 87.4, 87.5, 87.5] },
            'graduation': { value: '78.2%', change: '+1.1%', data: [77.1, 77.2, 77.4, 77.5, 77.7, 77.8, 77.9, 78.0, 78.1, 78.1, 78.2, 78.2] },
            'satisfaction': { value: '92.1%', change: '+1.3%', data: [90.8, 91.0, 91.2, 91.3, 91.5, 91.6, 91.7, 91.8, 91.9, 92.0, 92.1, 92.1] },
            'teacher': { value: '4.7/5.0', change: '+0.1', data: [4.6, 4.6, 4.6, 4.6, 4.6, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7] },
            'research': { value: '45', change: '+7', data: [38, 39, 40, 41, 42, 42, 43, 43, 44, 44, 45, 45] },
            'classroom': { value: '83.4%', change: '-1.1%', data: [84.5, 84.3, 84.1, 84.0, 83.8, 83.7, 83.6, 83.5, 83.5, 83.4, 83.4, 83.4] },
            'international': { value: '14.8%', change: '+2.3%', data: [12.5, 12.7, 12.9, 13.1, 13.3, 13.5, 13.7, 13.9, 14.1, 14.3, 14.5, 14.8] }
        },
        '2024': {
            'retention': { value: '88.4%', change: '+0.9%', data: [87.5, 87.6, 87.8, 87.9, 88.0, 88.1, 88.2, 88.3, 88.3, 88.4, 88.4, 88.4] },
            'graduation': { value: '79.4%', change: '+1.2%', data: [78.2, 78.4, 78.6, 78.8, 79.0, 79.1, 79.2, 79.3, 79.3, 79.4, 79.4, 79.4] },
            'satisfaction': { value: '93.2%', change: '+1.1%', data: [92.1, 92.3, 92.5, 92.6, 92.8, 92.9, 93.0, 93.1, 93.1, 93.2, 93.2, 93.2] },
            'teacher': { value: '4.8/5.0', change: '+0.1', data: [4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8] },
            'research': { value: '53', change: '+8', data: [45, 46, 47, 48, 49, 50, 51, 51, 52, 52, 53, 53] },
            'classroom': { value: '85.5%', change: '+2.1%', data: [83.4, 83.6, 83.8, 84.0, 84.2, 84.4, 84.6, 84.8, 85.0, 85.2, 85.4, 85.5] },
            'international': { value: '17.0%', change: '+2.2%', data: [14.8, 15.0, 15.2, 15.4, 15.6, 15.8, 16.0, 16.2, 16.4, 16.6, 16.8, 17.0] }
        },
        '2025': {
            'retention': { value: '89.2%', change: '+0.8%', data: [88.4, 88.5, 88.6, 88.7, 88.8, 88.9, 89.0, 89.0, 89.1, 89.1, 89.2, 89.2] },
            'graduation': { value: '80.5%', change: '+1.1%', data: [79.4, 79.6, 79.8, 79.9, 80.1, 80.2, 80.3, 80.4, 80.4, 80.5, 80.5, 80.5] },
            'satisfaction': { value: '93.4%', change: '+0.2%', data: [93.2, 93.2, 93.3, 93.3, 93.3, 93.3, 93.4, 93.4, 93.4, 93.4, 93.4, 93.4] },
            'teacher': { value: '4.8/5.0', change: '0.0', data: [4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8, 4.8] },
            'research': { value: '57', change: '+4', data: [53, 54, 55, 55, 56, 56, 56, 57, 57, 57, 57, 57] },
            'classroom': { value: '85.7%', change: '+0.2%', data: [85.5, 85.6, 85.6, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7, 85.7] },
            'international': { value: '18.5%', change: '+1.5%', data: [17.0, 17.2, 17.4, 17.6, 17.8, 18.0, 18.1, 18.2, 18.3, 18.4, 18.5, 18.5] }
        }
    };

    // Tipo de indicador por categoría
    const indicatorTypes = {
        'academic': ['retention', 'graduation', 'satisfaction'],
        'research': ['research'],
        'infrastructure': ['classroom'],
        'financial': ['teacher'],
        'international': ['international']
    };

    // Obtener todas las tarjetas de indicadores
    const indicatorCards = document.querySelectorAll('.indicator-card');
    
    // PRIMERO: Eliminar TODOS los mensajes de error existentes
    const existingMessages = document.querySelectorAll('.no-indicators');
    existingMessages.forEach(message => message.remove());
    
    // Actualizar cada indicador según el año y tipo seleccionado
    indicatorCards.forEach(card => {
        const indicatorTitle = card.querySelector('h3').textContent.toLowerCase();
        let indicatorType = '';
        
        // Determinar el tipo de indicador
        if (indicatorTitle.includes('retención')) indicatorType = 'retention';
        else if (indicatorTitle.includes('graduación')) indicatorType = 'graduation';
        else if (indicatorTitle.includes('satisfacción')) indicatorType = 'satisfaction';
        else if (indicatorTitle.includes('docente')) indicatorType = 'teacher';
        else if (indicatorTitle.includes('investigativa')) indicatorType = 'research';
        else if (indicatorTitle.includes('aulas') || indicatorTitle.includes('ocupación')) indicatorType = 'classroom';
        else if (indicatorTitle.includes('internacional')) indicatorType = 'international';
        
        // Mostrar u ocultar la tarjeta según el tipo seleccionado
        let shouldShow = false;
        
        if (type === 'all') {
            shouldShow = true;
        } else if (type === 'infrastructure' && indicatorType === 'classroom') {
            // Caso especial para infraestructura, asegurando que 'classroom' (ocupación de aulas) se muestre
            shouldShow = true;
        } else if (type === 'international' && indicatorType === 'international') {
            // Caso para el nuevo indicador de internacionalización
            shouldShow = true;
        } else {
            shouldShow = indicatorTypes[type] && indicatorTypes[type].includes(indicatorType);
        }
        
        if (shouldShow) {
            card.style.display = 'flex';
            
            // Actualizar valores
            const valueElement = card.querySelector('.value');
            const changeElement = card.querySelector('.change');
            const chartCanvas = card.querySelector('canvas');
            
            if (indicatorValues[year] && indicatorValues[year][indicatorType]) {
                const data = indicatorValues[year][indicatorType];
                
                // Actualizar valor y cambio
                if (valueElement) valueElement.textContent = data.value;
                if (changeElement) {
                    changeElement.textContent = data.change;
                    // Determinar si es positivo, negativo o neutro
                    if (data.change.includes('+')) {
                        changeElement.className = 'change positive';
                    } else if (data.change.includes('-')) {
                        changeElement.className = 'change negative';
                    } else {
                        changeElement.className = 'change neutral';
                    }
                }
                
                // Actualizar gráfico si existe
                if (chartCanvas && chartCanvas.id) {
                    const color = 
                        indicatorType === 'retention' ? '84, 68, 239' :
                        indicatorType === 'graduation' ? '133, 142, 255' :
                        indicatorType === 'satisfaction' ? '242, 205, 0' :
                        indicatorType === 'teacher' ? '66, 0, 124' :
                        indicatorType === 'research' ? '175, 149, 113' :
                        indicatorType === 'international' ? '255, 99, 132' :
                        '210, 227, 248';
                    
                    createIndicatorChart(chartCanvas.id, data.data, color);
                }
            }
        } else {
            card.style.display = 'none';
        }
    });
    
    // Verificar si hay indicadores visibles después del filtrado
    const visibleCards = Array.from(document.querySelectorAll('.indicator-card')).filter(card => 
        card.style.display === 'flex'
    );
    const indicatorsGrid = document.querySelector('.indicators-grid');
    
    // Si no hay tarjetas visibles, mostrar un mensaje
    if (visibleCards.length === 0 && indicatorsGrid) {
        // Asegurarnos de que no exista un mensaje previo
        if (!document.querySelector('.no-indicators')) {
            const noDataMessage = document.createElement('div');
            noDataMessage.className = 'no-indicators';
            noDataMessage.innerHTML = `
                <i class="fas fa-info-circle"></i>
                <p>No hay indicadores disponibles para la categoría "${type}" en el año ${year}.</p>
            `;
            indicatorsGrid.appendChild(noDataMessage);
        }
    }
}
  </script>

  <script>
/**
 * Actualiza todas las gráficas cuando cambia el año
 * @param {string} selectedYear - Año seleccionado
 */
 function updateAllCharts(selectedYear) {
    // Gráfica de matrícula
    if (window.enrollmentChart) {
        const levelFilter = document.getElementById('enrollment-level-filter');
        const semesterFilter = document.getElementById('enrollment-semester-filter');
        const modeFilter = document.getElementById('enrollment-mode-filter');

        updateEnrollmentChart(
            window.enrollmentChart,
            levelFilter.value,
            semesterFilter.value,
            modeFilter.value
        );
    }

    // Gráfica demográfica
    if (window.demographicChart) {
        const semesterFilter = document.getElementById('demographic-semester-filter');
        const typeFilter = document.getElementById('demographic-type-filter');

        updateDemographicChart(
            window.demographicChart,
            semesterFilter.value,
            typeFilter.value
        );
    }

    // Gráfica de países
    if (window.countriesChart) {
        const semesterFilter = document.getElementById('countries-semester-filter');
        const viewFilter = document.getElementById('countries-view-filter');

        updateCountriesChart(
            window.countriesChart,
            semesterFilter.value,
            viewFilter.value
        );
    }

    // Gráfica académica
    if (window.academicChart) {
        const indicatorFilter = document.getElementById('academic-indicator-filter');

        updateAcademicChart(
            window.academicChart,
            indicatorFilter.value,
            selectedYear
        );
    }

    // Actualizar indicadores
    const typeFilter = document.getElementById('indicator-type-filter');
    updateIndicators(selectedYear, typeFilter.value);

    // Verificar si hay indicadores visibles después del filtrado
    const visibleCards = Array.from(document.querySelectorAll('.indicator-card')).filter(card => 
        card.style.display === 'flex'
    );
    const indicatorsGrid = document.querySelector('.indicators-grid');
    
    // Si no hay tarjetas visibles, mostrar un mensaje
    if (visibleCards.length === 0 && indicatorsGrid) {
        // Asegurarnos de que no exista un mensaje previo
        if (!document.querySelector('.no-indicators')) {
            const noDataMessage = document.createElement('div');
            noDataMessage.className = 'no-indicators';
            noDataMessage.innerHTML = `
                <i class="fas fa-info-circle"></i>
                <p>No hay indicadores disponibles para la categoría "${typeFilter.value}" en el año ${selectedYear}.</p>
            `;
            indicatorsGrid.appendChild(noDataMessage);
        }
    }
}

/**
 * Configura las pestañas (tabs) de la sección de estadísticas.
 * Maneja la alternancia entre las diferentes pestañas.
 */
function setupTabs() {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabPanes = document.querySelectorAll('.tab-pane');

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');
            
            // Desactivar todas las pestañas
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabPanes.forEach(pane => pane.classList.remove('active'));
            
            // Activar la pestaña seleccionada
            button.classList.add('active');
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            // Actualizar el tamaño de las gráficas cuando se cambia de pestaña
            window.dispatchEvent(new Event('resize'));
        });
    });
}

/**
 * Configura los filtros para la gráfica de matrícula.
 * @param {Chart} enrollmentChart - Instancia de la gráfica de matrícula
 */
function setupEnrollmentFilters(enrollmentChart) {
    const levelFilter = document.getElementById('enrollment-level-filter');
    const semesterFilter = document.getElementById('enrollment-semester-filter');
    const modeFilter = document.getElementById('enrollment-mode-filter');
    const yearFilter = document.getElementById('enrollment-year-filter');
    
    window.enrollmentChart = enrollmentChart;
    
    if (levelFilter && semesterFilter && modeFilter && yearFilter) {
        // Añadir eventos a todos los filtros
        [yearFilter, levelFilter, semesterFilter, modeFilter].forEach(filter => {
            filter.addEventListener('change', () => {
                updateAllCharts(yearFilter.value);
            });
        });
    }
}

/**
 * Configura los filtros para la gráfica demográfica.
 * @param {Chart} demographicChart - Instancia de la gráfica demográfica
 */
function setupDemographicFilters(demographicChart) {
    const yearFilter = document.getElementById('demographic-year-filter');
    const semesterFilter = document.getElementById('demographic-semester-filter');
    const typeFilter = document.getElementById('demographic-type-filter');
    
    window.demographicChart = demographicChart;
    
    if (yearFilter && semesterFilter && typeFilter) {
        [yearFilter, semesterFilter, typeFilter].forEach(filter => {
            filter.addEventListener('change', () => {
                updateAllCharts(yearFilter.value);
            });
        });
    }
}

/**
 * Configura los filtros para la gráfica de países.
 * @param {Chart} countriesChart - Instancia de la gráfica de países
 */
function setupCountriesFilters(countriesChart) {
    const yearFilter = document.getElementById('countries-year-filter');
    const semesterFilter = document.getElementById('countries-semester-filter');
    const viewFilter = document.getElementById('countries-view-filter');
    
    window.countriesChart = countriesChart;
    
    if (yearFilter && semesterFilter && viewFilter) {
        [yearFilter, semesterFilter, viewFilter].forEach(filter => {
            filter.addEventListener('change', () => {
                updateAllCharts(yearFilter.value);
            });
        });
    }
}

/**
 * Configura los filtros para la gráfica académica.
 * @param {Chart} academicChart - Instancia de la gráfica académica
 */
function setupAcademicFilters(academicChart) {
    const yearFilter = document.getElementById('academic-year-filter');
    const indicatorFilter = document.getElementById('academic-indicator-filter');
    
    window.academicChart = academicChart;
    
    if (yearFilter && indicatorFilter) {
        [yearFilter, indicatorFilter].forEach(filter => {
            filter.addEventListener('change', () => {
                updateAllCharts(yearFilter.value);
            });
        });
    }
}

/**
 * Configura los filtros para los indicadores.
 */
function setupIndicatorFilters() {
    const yearFilter = document.getElementById('indicator-year-filter');
    const typeFilter = document.getElementById('indicator-type-filter');
    
    if (yearFilter && typeFilter) {
        // Event listener para el filtro de año
        yearFilter.addEventListener('change', function() {
            updateIndicators(this.value, typeFilter.value);
        });
        
        // Event listener para el filtro de tipo
        typeFilter.addEventListener('change', function() {
            updateIndicators(yearFilter.value, this.value);
        });
        
        // Inicializar con valores por defecto
        updateIndicators(yearFilter.value, typeFilter.value);
    }
}

/**
 * Inicialización principal de todas las estadísticas.
 */
function initStatistics() {
    // Configurar pestañas
    setupTabs();
    
    // Inicializar gráficas principales y configurar sus filtros
    const enrollmentChart = initEnrollmentChart();
    setupEnrollmentFilters(enrollmentChart);

    const demographicChart = initDemographicChart();
    setupDemographicFilters(demographicChart);

    const countriesChart = initCountriesChart();
    setupCountriesFilters(countriesChart);

    const academicChart = initAcademicChart();
    setupAcademicFilters(academicChart);
    
    // Inicializar gráficas de indicadores
    initIndicatorCharts('2025');
    
    // Configurar filtros para indicadores
    setupIndicatorFilters();
}

// Listener para cuando el DOM esté completamente cargado
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar todo el sistema de estadísticas
    initStatistics();
});
  </script>

<script>
    let lastScrollPosition = 0;
    const header = document.querySelector('header');
    const mainContent = document.querySelector('.main-content');
    const scrollThreshold = 50;

    window.addEventListener('scroll', () => {
        const currentScroll = window.scrollY;
        
        if (currentScroll > lastScrollPosition && currentScroll > scrollThreshold) {
            header.classList.add('hidden');
            mainContent.classList.add('header-hidden');
        } else if (currentScroll < lastScrollPosition) {
            header.classList.remove('hidden');
            mainContent.classList.remove('header-hidden');
        }
        
        lastScrollPosition = currentScroll;
    });

    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('expanded');
    }
    
    // Funcionalidad del Slider de Servicios
    let currentSlide = 0;
    const slidesToShow = window.innerWidth < 768 ? 1 : window.innerWidth < 1024 ? 2 : 3;
    const totalSlides = document.querySelectorAll('.service-slide').length;
    const sliderTrack = document.querySelector('.slider-track');
    const sliderIndicators = document.getElementById('sliderIndicators');
    
    // Inicializar slider
    function initSlider() {
        // Crear indicadores
        for (let i = 0; i < Math.ceil(totalSlides / slidesToShow); i++) {
            const indicator = document.createElement('span');
            indicator.classList.add('slider-indicator');
            indicator.onclick = () => goToSlide(i);
            sliderIndicators.appendChild(indicator);
        }
        
        // Activar primer indicador
        updateSlider();
        
        // Auto deslizamiento cada 5 segundos
        setInterval(() => {
            moveSlider(1);
        }, 5000);
        
        // Ajustar en cambio de tamaño de ventana
        window.addEventListener('resize', () => {
            const newSlidesToShow = window.innerWidth < 768 ? 1 : window.innerWidth < 1024 ? 2 : 3;
            if (newSlidesToShow !== slidesToShow) {
                location.reload(); // Recargar para aplicar nuevos estilos
            }
        });
    }
    
    function moveSlider(direction) {
        const maxSlide = Math.ceil(totalSlides / slidesToShow) - 1;
        currentSlide = (currentSlide + direction + maxSlide + 1) % (maxSlide + 1);
        updateSlider();
    }
    
    function goToSlide(index) {
        currentSlide = index;
        updateSlider();
    }
    
    function updateSlider() {
        // Mover el track
        const slideWidth = 100 / slidesToShow;
        sliderTrack.style.transform = `translateX(-${currentSlide * slideWidth * slidesToShow}%)`;
        
        // Actualizar indicadores
        const indicators = document.querySelectorAll('.slider-indicator');
        indicators.forEach((indicator, index) => {
            if (index === currentSlide) {
                indicator.classList.add('active');
            } else {
                indicator.classList.remove('active');
            }
        });
    }
    
    // Iniciar el slider cuando el DOM esté cargado
    document.addEventListener('DOMContentLoaded', initSlider);
</script>

<script>
    // Script para actualizar datos dinámicamente por año - Parte 1

// Datos de matrícula por año
const matriculasPorAno = {
    '2022-2023': {
        total: [120, 105, 90, 115, 85, 70, 60, 75, 65, 70, 55],
        presencial: [100, 90, 78, 95, 72, 58, 48, 62, 55, 60, 45],
        online: [20, 15, 12, 20, 13, 12, 12, 13, 10, 10, 10]
    },
    '2023-2024': {
        total: [125, 110, 95, 120, 90, 75, 65, 80, 70, 75, 60],
        presencial: [105, 95, 82, 100, 78, 62, 52, 68, 58, 65, 50],
        online: [20, 15, 13, 20, 12, 13, 13, 12, 12, 10, 10]
    },
    '2024-2025': {
        total: [130, 115, 100, 125, 95, 80, 70, 85, 75, 80, 65],
        presencial: [110, 100, 85, 105, 82, 68, 58, 72, 62, 70, 55],
        online: [20, 15, 15, 20, 13, 12, 12, 13, 13, 10, 10]
    },
    '2025-2026': {
        total: [132, 108, 95, 125, 92, 75, 65, 82, 70, 78, 60],
        presencial: [110, 90, 82, 102, 78, 62, 52, 70, 58, 65, 40],
        online: [22, 18, 13, 23, 14, 13, 13, 12, 12, 13, 20]
    }
};

// Datos demográficos por año
const demografiaPorAno = {
    '2022-2023': {
        genero: {
            etiquetas: ['Masculino', 'Femenino'],
            datos: [307,217,]
        },
        edad: {
            etiquetas: ['17-20', '21-25', '26-30', '31-40', '41+'],
            datos: [35, 36, 14, 8, 7]
        },
        estado: {
            etiquetas: ['Nuevo León', 'CDMX', 'Jalisco', 'Chiapas', 'Otros'],
            datos: [36, 16, 11, 9, 28]
        }
    },
    '2023-2024': {
        genero: {
            etiquetas: ['Masculino', 'Femenino',],
            datos: [1603, 1037]
        },
        edad: {
            etiquetas: ['17-20', '21-25', '26-30', '31-40', '41+'],
            datos: [36, 37, 15, 7, 5]
        },
        estado: {
            etiquetas: ['Nuevo León', 'CDMX', 'Jalisco', 'Chiapas', 'Otros'],
            datos: [37, 17, 12, 10, 24]
        }
    },
    '2024-2025': {
        genero: {
            etiquetas: ['Masculino', 'Femenino'],
            datos: [843, 635]
        },
        edad: {
            etiquetas: ['17-20', '21-25', '26-30', '31-40', '41+'],
            datos: [36, 38, 16, 7, 3]
        },
        estado: {
            etiquetas: ['Nuevo León', 'CDMX', 'Jalisco', 'Chiapas', 'Otros'],
            datos: [38, 17, 12, 10, 23]
        }
    },
    '2025-2026': {
        genero: {
            etiquetas: ['Masculino', 'Femenino'],
            datos: [1807,1217,]
        },
        edad: {
            etiquetas: ['17-20', '21-25', '26-30', '31-40', '41+'],
            datos: [37, 38, 15, 7, 3]
        },
        estado: {
            etiquetas: ['Nuevo León', 'CDMX', 'Jalisco', 'Chiapas', 'Otros'],
            datos: [38, 17, 12, 10, 23]
        }
    }
};

// Script para actualizar datos dinámicamente por año - Parte 2

// Datos de países por año
const paisesPorAno = {
    '2022-2023': {
        todos: {
            etiquetas: ['México', 'Colombia', 'Perú', 'Argentina', 'Venezuela', 'Brasil', 'Chile', 'Estados Unidos', 'Ecuador', 'España', 'Otros'],
            datos: [55, 12, 8, 5, 3, 3, 2, 4, 1, 1, 6]
        }
    },
    '2023-2024': {
        todos: {
            etiquetas: ['México', 'Colombia', 'Perú', 'Argentina', 'Brasil', 'Venezuela', 'Chile', 'Estados Unidos', 'Ecuador', 'España', 'Otros'],
            datos: [57, 13, 9, 6, 4, 3, 2, 3, 1, 1, 5]
        }
    },
    '2024-2025': {
        todos: {
            etiquetas: ['México', 'Colombia', 'Perú', 'Argentina', 'Estados Unidos', 'Brasil', 'Chile', 'Venezuela', 'España', 'Ecuador', 'Otros'],
            datos: [58, 14, 10, 6, 4, 3, 2, 2, 1, 1, 4]
        }
    },
    '2025-2026': {
        todos: {
            etiquetas: ['México', 'Colombia', 'Perú', 'Argentina', 'Estados Unidos', 'Brasil', 'Chile', 'Venezuela', 'España', 'Ecuador', 'Otros'],
            datos: [60, 13, 9, 6, 4, 3, 2, 2, 1, 1, 4]
        }
    }
};

// Datos académicos por año
const academicosPorAno = {
    '2022-2023': {
        retencion: [87, 83, 90, 85, 82, 86, 84, 81, 79, 87],
        graduacion: [77, 71, 85, 80, 73, 75, 74, 70, 69, 76],
        satisfaccion: [90, 88, 85, 87, 83, 84, 82, 83, 85, 89]  
    },
    '2023-2024': {
        retencion: [88, 84, 91, 86, 83, 87, 85, 82, 80, 88],
        graduacion: [78, 72, 86, 81, 74, 76, 75, 71, 70, 77],
        satisfaccion: [91, 89, 86, 88, 84, 85, 83, 84, 86, 90]
    },
    '2024-2025': {
        retencion: [89, 85, 92, 87, 84, 88, 86, 83, 81, 89],
        graduacion: [79, 73, 87, 82, 75, 77, 76, 72, 71, 78],
        satisfaccion: [92, 90, 87, 89, 85, 86, 84, 85, 87, 91]
    },
    '2025-2026': {
        retencion: [90, 86, 93, 88, 85, 89, 87, 84, 82, 90],
        graduacion: [80, 74, 88, 83, 76, 78, 77, 73, 72, 79],
        satisfaccion: [93, 91, 88, 90, 86, 87, 85, 86, 88, 92]
    }
};

// Función para actualizar selectores de año con rangos
function actualizarSelectoresAno() {
    const yearFilters = [
        'enrollment-year-filter', 
        'demographic-year-filter', 
        'countries-year-filter', 
        'academic-year-filter'
    ];

    yearFilters.forEach(filterId => {
        const yearSelect = document.getElementById(filterId);
        if (yearSelect) {
            yearSelect.innerHTML = `
                <option value="2025">2025-2026</option>
                <option value="2024">2024-2025</option>
                <option value="2023">2023-2024</option>
                <option value="2022">2022-2023</option>
            `;
        }
    });
}

// Función principal para actualizar datos dinámicamente
function actualizarDatosPorAno(selectedYear) {
    const yearKey = {
        '2022': '2022-2023',
        '2023': '2023-2024',
        '2024': '2024-2025',
        '2025': '2025-2026'
    }[selectedYear];

    // Actualizar matrícula
    const matriculaData = matriculasPorAno[yearKey];
    enrollmentData.all.all.all = matriculaData.total;
    enrollmentData.all.all.presential = matriculaData.presencial;
    enrollmentData.all.all.online = matriculaData.online;

    // Actualizar demografía
    const demografiaData = demografiaPorAno[yearKey];
    demographicData['1'].gender.data = demografiaData.genero.datos;
    demographicData['1'].age.data = demografiaData.edad.datos;
    demographicData['1'].state.data = demografiaData.estado.datos;

    // Actualizar países
    const paisesData = paisesPorAno[yearKey];
    countriesData['1'].all.data = paisesData.todos.datos;

    // Actualizar datos académicos
    const academicoData = academicosPorAno[yearKey];
    academicData[selectedYear] = {
        retention: academicoData.retencion,
        graduation: academicoData.graduacion,
        satisfaction: academicoData.satisfaccion
    };

    // Disparar la actualización de gráficas
    updateAllCharts(selectedYear);
}

// Event listeners para actualización al cambiar año
document.addEventListener('DOMContentLoaded', () => {
    actualizarSelectoresAno();

    const yearFilters = [
        'enrollment-year-filter', 
        'demographic-year-filter', 
        'countries-year-filter', 
        'academic-year-filter'
    ];

    yearFilters.forEach(filterId => {
        const yearSelect = document.getElementById(filterId);
        if (yearSelect) {
            yearSelect.addEventListener('change', (event) => {
                actualizarDatosPorAno(event.target.value);
            });
        }
    });
});
</script>

  