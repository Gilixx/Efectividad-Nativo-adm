<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Estadísticas del Departamento de Efectividad Institucional.">
    <meta name="keywords" content="estadísticas, universidad, datos, efectividad institucional, matrícula">
    <title>Estadísticas</title>
    <link rel="stylesheet" href="/public/styles/estadisticas-indicadores.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Logo -->
    <link rel="icon" href="https://cdn.um.click/logos-um/logo/">
</head>
<body>
    <!-- Header with Logo and Nav -->
    <header>
        <a href="https://www.um.edu.mx/">
            <div class="logo-container">
                <img src="https://cdn.um.click/logos-um/logo/" alt="Logo Universidad">
            </div> 
        </a>
        
        <!-- Sidebar/Nav -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Abrir menú de navegación">
                <i class="fas fa-bars"></i>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="/index.html"><i class="fas fa-home"></i> <span>Inicio</span></a></li>
                    <li><a href="/src/pages/acreditaciones.html"><i class="fas fa-award"></i> <span>Acreditaciones</span></a></li>
                    <li><a href="/src/pages/estadisticas.html" class="active"><i class="fas fa-chart-bar"></i> <span>Estadísticas</span></a></li>
                    <li><a href="/src/pages/junta-gobierno.html"><i class="fas fa-university"></i> <span>Junta de Gobierno</span></a></li>
                    <li><a href="/src/pages/pide.html"><i class="fas fa-file-alt"></i> <span>PIDE</span></a></li>
                    <li><a href="/src/pages/equipo.html"><i class="fas fa-users"></i> <span>Equipo</span></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Header Section -->
        <section class="page-header" id="top">
            <div class="title-container">
                <h1>Estadísticas</h1>
                <p>Visualiza los datos más relevantes de matrícula y demografía de nuestra institución</p>
            </div>
        </section>

        <!-- Sección: Las estadísticas en la UM -->
        <section class="content-section">
            <div class="box">
                <div class="section-text">
                    <h2>Las estadísticas en la UM</h2>
                    <p>Las estadísticas en la Universidad de Montemorelos nos permiten comprender mejor nuestra comunidad educativa y monitorear el progreso institucional. Estos datos son fundamentales para el mejoramiento continuo y el logro de nuestros objetivos.</p>
                    <p>A través de nuestro sistema de información, recopilamos y presentamos datos relevantes sobre matrícula estudiantil y características demográficas de nuestra comunidad universitaria.</p>
                </div>
                <div class="section-image">
                    <img src="/public/assets/images/D345F6B3-C209-452D-8C8F-2F997C1CCA9C.JPG" alt="Estadísticas en la UM">
                </div>
            </div>
        </section>

        <!-- Sección: Visualizador de estadísticas -->
        <section class="content-section">
            <h2 class="section-title">Visualizador de estadísticas</h2>
            
            <div class="stats-tabs">
                <div class="tabs-nav">
                    <button class="tab-button active" data-tab="enrollment">Matrícula</button>
                    <button class="tab-button" data-tab="demographic">Demografía</button>
                    <button class="tab-button" data-tab="countries">Países</button>
                </div>
                
                <div class="tab-content">
                    <!-- Tab 1: Matrícula -->
                    <div class="tab-pane active" id="enrollment-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Total de estudiantes por facultad</h3>
                                <div class="chart-filters">
                                    <select id="enrollment-semester-filter">
                                        <option value="1">1er Semestre</option>
                                        <option value="2">2do Semestre</option>
                                    </select>
                                    <select id="enrollment-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="PREGRADO">Pregrado</option>
                                        <option value="POSGRADO">Posgrado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="enrollmentChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Total de estudiantes distribuidos por facultad</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab 2: Demografía -->
                    <div class="tab-pane" id="demographic-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Distribución demográfica de estudiantes</h3>
                                <div class="chart-filters">
                                    <select id="demographic-semester-filter">
                                        <option value="1">1er Semestre</option>
                                        <option value="2">2do Semestre</option>
                                    </select>
                                    <select id="demographic-type-filter">
                                        <option value="gender">Género</option>
                                        <option value="religion">Religión</option>
                                        <option value="residence">Residencia</option>
                                    </select>
                                    <select id="demographic-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="PREGRADO">Pregrado</option>
                                        <option value="POSGRADO">Posgrado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="demographicChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Distribución demográfica de la población estudiantil</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab 3: Países -->
                    <div class="tab-pane" id="countries-tab">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Estudiantes por país de origen</h3>
                                <div class="chart-filters">
                                    <select id="countries-semester-filter">
                                        <option value="1">1er Semestre</option>
                                        <option value="2">2do Semestre</option>
                                    </select>
                                    <select id="countries-view-filter">
                                        <option value="top10">Top 10 países</option>
                                        <option value="top20">Top 20 países</option>
                                        <option value="all">Todos los países</option>
                                    </select>
                                    <select id="countries-level-filter">
                                        <option value="all">Todos los niveles</option>
                                        <option value="PREGRADO">Pregrado</option>
                                        <option value="POSGRADO">Posgrado</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="countriesChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <p>Distribución de estudiantes por país de origen</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard con iframe de Looker Studio -->
        <section class="content-section">
            <h2 class="section-title">Dashboard Interactivo</h2>
            <div class="dashboard-container">
                <iframe 
                    width="100%" 
                    height="600" 
                    src="https://lookerstudio.google.com/embed/reporting/bdfbeb0f-2e15-4bbe-951d-50593ed4b1d0/page/ZGi9D" 
                    frameborder="0" 
                    style="border:0" 
                    allowfullscreen 
                    sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox">
                </iframe>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Departamento de Efectividad</h4>
                <p>Comprometidos con la excelencia y mejora continua de nuestra institución.</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces Rápidos</h4>
                <ul>
                    <li><a href="/index.html">Inicio</a></li>
                    <li><a href="/src/pages/acreditaciones.html">Acreditaciones</a></li>
                    <li><a href="/src/pages/mision-vision.html">Misión y Visión</a></li>
                    <li><a href="/src/pages/estadisticas.html">Estadísticas</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <ul class="contact-info">
                    <li><i class="fas fa-phone"></i> (123) 456-7890</li>
                    <li><i class="fas fa-envelope"></i> efectividad@universidad.edu</li>
                    <li><i class="fas fa-map-marker-alt"></i> Campus Universitario</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Departamento de Efectividad. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="/src/js/estadisticas.js"></script>
    
    <script>
        let lastScrollPosition = 0;
        const header = document.querySelector('header');
        const mainContent = document.querySelector('.main-content');
        const scrollThreshold = 50;

        window.addEventListener('scroll', () => {
            const currentScroll = window.scrollY;
            
            if (currentScroll > lastScrollPosition && currentScroll > scrollThreshold) {
                header.classList.add('hidden');
                mainContent.classList.add('header-hidden');
            } else if (currentScroll < lastScrollPosition) {
                header.classList.remove('hidden');
                mainContent.classList.remove('header-hidden');
            }
            
            lastScrollPosition = currentScroll;
        });

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('expanded');
        }
    </script>
</body>
</html>